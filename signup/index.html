<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>تسجيل الدخول</title>
<style>
body{margin:0;font-family:sans-serif;background:#fff;color:#111;direction:rtl}
.loader{display:flex;justify-content:center;align-items:center;height:100vh;background:#fff}
.dot{width:10px;height:10px;margin:0 5px;background:#0052ff;border-radius:50%;animation:blink 1.4s infinite}
.dot:nth-child(2){animation-delay:.2s}
.dot:nth-child(3){animation-delay:.4s}
@keyframes blink{0%,80%,100%{opacity:0}40%{opacity:1}}
.container{display:none;max-width:420px;margin:40px auto;padding:20px;background:#fff;border-radius:8px;box-shadow:0 2px 8px rgba(0,0,0,0.1)}
h2{text-align:center;margin-bottom:20px;color:#0052ff}
label{display:block;margin-top:15px;margin-bottom:5px;font-weight:bold}
input,select,button{width:100%;padding:10px;border:1px solid #ccc;border-radius:5px;font-size:15px}
button{background:#0052ff;color:#fff;border:none;cursor:pointer;margin-top:20px}
.qr-section{margin-top:15px;display:none}
.qr-result{margin-top:10px;padding:10px;background:#f5f5f5;border-radius:5px;word-break:break-all;font-size:14px}
</style>
</head>
<body>

<div class="loader">
  <div class="dot"></div>
  <div class="dot"></div>
  <div class="dot"></div>
</div>

<div class="container">
  <h2>تسجيل الدخول</h2>

  <label for="platform">اختر المنصة</label>
  <select id="platform">
    <option value="">-- اختر --</option>
    <option value="stake">STAKE</option>
    <option value="mystake">MYSTAKE</option>
    <option value="melbet">Melbet</option>
    <option value="megapari">MegaPari</option>
    <option value="linebet">LineBet</option>
    <option value="1xbet">1xBet</option>
    <option value="gooobet">Gooobet</option>
    <option value="risco">RiscoBet</option>
    <option value="888starz">888starz</option>
    <option value="mostbet">MostBet</option>
  </select>

  <label for="userid">أدخل ID</label>
  <input type="text" id="userid" placeholder="اكتب ID الخاص بك">

  <div class="qr-section" id="qr-section">
    <label for="qr-upload">ارفع صورة QR</label>
    <input type="file" id="qr-upload" accept="image/*">
    <div class="qr-result" id="qr-result"></div>
  </div>

  <button>تأكيد</button>
</div>

<script src="https://unpkg.com/jsqr/dist/jsQR.js"></script>
<script>
setTimeout(()=>{
  document.querySelector('.loader').style.display='none';
  document.querySelector('.container').style.display='block';
},2000);

const platform=document.getElementById('platform');
const qrSection=document.getElementById('qr-section');
const qrUpload=document.getElementById('qr-upload');
const qrResult=document.getElementById('qr-result');

platform.addEventListener('change',()=>{
  if(platform.value==='stake' || platform.value==='mystake'){
    qrSection.style.display='block';
  }else{
    qrSection.style.display='none';
    qrResult.textContent='';
  }
});

qrUpload.addEventListener('change',e=>{
  const file=e.target.files[0];
  if(!file) return;
  const reader=new FileReader();
  reader.onload=function(){
    const img=new Image();
    img.onload=function(){
      const canvas=document.createElement('canvas');
      const ctx=canvas.getContext('2d');
      const scale=4; 
      canvas.width=img.width*scale;
      canvas.height=img.height*scale;
      ctx.drawImage(img,0,0,canvas.width,canvas.height);

      let imageData=ctx.getImageData(0,0,canvas.width,canvas.height);
      enhanceImage(imageData.data);
      const code=jsQR(imageData.data,imageData.width,imageData.height,{inversionAttempts:"attemptBoth"});
      qrResult.textContent= code ? "الرابط: "+code.data : "لم يتم التعرف على الكود.";
    };
    img.src=reader.result;
  };
  reader.readAsDataURL(file);
});

function enhanceImage(data){
  for(let i=0;i<data.length;i+=4){
    let avg=(data[i]+data[i+1]+data[i+2])/3;
    avg=avg>128?255:0;
    data[i]=data[i+1]=data[i+2]=avg;
  }
}
</script>

</body>
</html>
